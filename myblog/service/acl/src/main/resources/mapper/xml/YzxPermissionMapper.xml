<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yzx.acl.mapper.YzxPermissionMapper">
    <select id="getPermissionMenu" resultType="java.lang.String">
SELECT p.permission_value from yzx_user u
left join yzx_user_role ru on u.id=ru.user_id
left join yzx_role r on r.id=ru.role_id
left join yzx_role_permission rp on r.id=rp.role_id
left join yzx_permission p on p.id=rp.permission_id
where u.id=#{userid} and p.permission_value is not null
    </select>

    <select id="showMenu" resultType="com.yzx.acl.vo.MenuVo">
        SELECT DISTINCT p.permission_value,p.id,p.name,p.path,p.component,p.pid,p.icon from yzx_user u
left join yzx_user_role ru on u.id=ru.user_id
left join yzx_role r on r.id=ru.role_id
left join yzx_role_permission rp on r.id=rp.role_id
left join yzx_permission p on p.id=rp.permission_id
where u.id=#{userid}
    </select>
</mapper>
